<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="../css/task-3.1.css" />
    <title>Document</title>
</head>
<body>
    <header>
        <h1>Javascript task 3.4.2</h1>
    </header>
    <main>
        <p>To view this task you will need to open the console in developer tools.</p>
    </main>
    <aside>
    </aside>
    <footer>
        <p>&copy; 2020</p>
    </footer>
    <script>

        var objShoppingCart=[
            {name:"loaf of bread",type:"food",quantity:1,price:.85},
            {name:"multipack beans",type:"food",quantity:1,price:1},
            {name:"mushrooms",type:"food",quantity:10,price:.1},
            {name:"can of beer",type:"alcohol",quantity:4,price:1.1},
            {name:"prosecco",type:"alcohol",quantity:1,price:8.99},
            {name:"steak",type:"food",quantity:2,price:3.99},
            {name:"blue cheese",type:"food",quantity:1,price:2.99},
            {name:"candles",type:"home",quantity:3,price:1.99},
            {name:"cheesecake",type:"food",quantity:1,price:4.99},
            {name:"onions",type:"food",quantity:3,price:.4}
        ];

        function getTotalPrice(objCart)
        {
            // testing the object is correct
            console.log(objCart);
            var totalPrice=0,currentItem,currentItemTotal;
            // loop through each item of the cart
            for (var i = 0; i < objCart.length; i++)
            {
                //set a variable to be the current cart item
                currentItem=objCart[i];
                // testing the counter and the current item are correct
                console.log(currentItem);
                console.log(i);
                // add the quantity*price of the object to totalprice
                currentItemTotal=currentItem['quantity']*currentItem.price;                
                if (currentItem.type == 'food')
                {
                    currentItemTotal=currentItemTotal*0.8;
                }
                console.log(currentItemTotal);
                totalPrice=totalPrice+currentItemTotal;
                console.log(totalPrice);
            }
            //return the total price
            totalPrice=totalPrice.toFixed(2);
            return totalPrice;
        }

        var cartTotal=getTotalPrice(objShoppingCart);
        console.log('cartTotal:'+cartTotal);
    </script>
</body>
</html>